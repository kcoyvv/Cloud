# yamlé”šç‚¹(ä¸æ‡‚è‡ªè¡ŒGoogle)å‹¿åŠ¨
proxy-provider-http: &http
  type: http
  interval: 3600
  health-check:
    enable: false
    url: https://1.1.1.1/generate_204
    interval: 7200

proxy-provider-file: &file
  type: file
  health-check:
    enable: false
    url: https://1.1.1.1/generate_204
    interval: 7200

#Metaæ ¸å¿ƒé…ç½®ï¼Œå¦‚æœä¸çŸ¥é“Metaæ ¸æ˜¯ä»€ä¹ˆè¯·ç”¨ä¸‹é¢çš„Premiumæ ¸å¿ƒé…ç½®
mixed-port: 7890
allow-lan: false
mode: rule
log-level: info
ipv6: false

external-controller: 127.0.0.1:9090
# æ§åˆ¶é¢æ¿ç›¸å¯¹è·¯å¾„
# external-ui: folder

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:1053
  default-nameserver:
   - 223.5.5.5
   - 119.29.29.29
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - "+.stun.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*"
    - "+.stun.*.*.*.*"
    - localhost.ptlogin2.qq.com
    - "+.pool.ntp.org"
    - miwifi.com

  nameserver:
    - 'https://doh.pub/dns-query'
    - 'https://223.5.5.5/dns-query'
  nameserver-policy:
    "geosite:!cn":
      - 'tls://8.8.4.4:853#Proxy'

  proxy-server-nameserver:
    - 119.29.29.29
    - 223.5.5.5

# å¦‚æœæœ‰èŠ‚ç‚¹å¯æŒ‰æ–‡æ¡£å¡«å†™ï¼Œå¹¶åœ¨groupå†…ä½¿ç”¨
proxies:
   #- name: JPARM è½¬å‘
     #type: ss
     #server: 36.140.181.4
     #port: 43307
     #cipher: aes-256-gcm
     #password: 8nfdttdfuAiSZzE4Fo13gwA7Ah7AFNJ2W3jBaQhElqrH
     #udp: true


proxy-groups:
  - name: ä»£ç†
    type: select
    # proxieså¼•ç”¨åˆ«çš„ç»„æˆ–è€…é…ç½®åœ¨æ–‡ä»¶å†…proxiesçš„èŠ‚ç‚¹
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½
      # å¦‚æœ‰é…ç½®proxieséƒ¨åˆ†å¯æŒ‰å¦‚ä¸‹æ ¼å¼ä½¿ç”¨é…ç½®æ–‡ä»¶å†…è‡ªå®šä¹‰çš„èŠ‚ç‚¹(éè®¢é˜…èŠ‚ç‚¹)

  - name: è‹¹æœ
    type: select
    proxies:
      - ç›´è¿
      - ä»£ç†

  - name: å¥ˆé£
    type: select
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½

  - name: æŠ–éŸ³
    type: select
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½

  - name: éŸ³ä¹
    type: select
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½

  - name: ç›´è¿
    type: url-test
    hidden: true
    proxies:
      - DIRECT

  - name: å…œåº•
    type: select
    proxies:
      - ä»£ç†
      - ç›´è¿

  - name: é¦™æ¸¯
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - Sub1
      # å½“proxy-provideré…ç½®å¤šä¸ªè®¢é˜…æ—¶ï¼Œä½¿ç”¨useä¸‹æ–¹æ ¼å¼å¼•ç”¨ï¼Œè¿™é‡Œä¸ºåªæœ‰ä¸€ä¸ªè®¢é˜…çš„æƒ…å†µ
      # - Sub2
      # - Sub3
    # filterä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»ç­›é€‰èŠ‚ç‚¹
    filter: "HK|Hong|é¦™æ¸¯|æ¸¯|æ€¥é€Ÿ"

  - name: ç‹®åŸ
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "SG|Singapore|ç‹®åŸ|æ–°åŠ å¡"

  - name: æ—¥æœ¬
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "JP|japan|æ—¥æœ¬"

  - name: ç¾å›½
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "US|United|ç¾|ç¾å›½"
  
  - name: å°æ¹¾
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "å°æ¹¾|TW|TaiWan|å°"

  - name: éŸ©å›½
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - Sub1
      # - Sub2
      # - Sub3
    filter: "éŸ©å›½|KR|Korea|éŸ©"

  - name: å…¶ä»–
    type: select
    use:
      - Sub1
      # - Sub2
      # - Sub3
    # ç­›é€‰é™¤æ—¥ç¾æ–°æ¸¯å¤–çš„èŠ‚ç‚¹ï¼Œå¯è‡ªè¡ŒæŒ‰æ ¼å¼æ·»åŠ 
    filter: "^(?!.*(?:Hong|HK|TW|KR|Taiwan|ğŸ‡¨ğŸ‡³|å®¢æˆ·|http|USA|Japan|Singapore|USA|éŸ©å›½|é¦™æ¸¯|æ—¥æœ¬|æ–°åŠ å¡|ç¾å›½)).*"


# proxy-provider å¯å‚è€ƒmetaå†…æ ¸æ–‡æ¡£ https://clash-meta.wiki/config/proxy-providers
proxy-providers:
  # åœ¨çº¿è®¢é˜…,æœ‰å¤šä¸ªæœºåœºæŒ‰æ ¼å¼ä¹¦å†™åœ¨ä¸‹é¢
  Sub1:
    <<: *http
    path: ./proxies/Sub1.yaml
    url: https://sub01.fkknet.cn/api/v1/client/subscribe?token=d2c349df7a4e82da3b2870669e8ec11e

  #Sub2:
    #<<: *http
    #path: ./proxies/Sub2.yaml
    #url: https://dyue-01.windmi.xyz/api/v1/client/subscribe?token=d9a9fe451422ca3937657c641ffc560c
  #
  # æœ¬åœ°èŠ‚ç‚¹ï¼Œè·¯å¾„å¯å¡«å†™ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„(ä¸ºclashå·¥ä½œç›®å½•ä¸‹)
  #Sub3:
    #<<: *file
    #path: D:\OneDrive\Clashé…ç½®æ–‡ä»¶\Sub3.yaml

# å¯å‚è€ƒmetaæ ¸æ–‡æ¡£ https://clash-meta.wiki/config/rules/rule-provider
rule-providers:
  Apple:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical.yaml"
    path: ./ruleset/apple.yaml
    interval: 86400

  Netflix:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix_Classical.yaml"
    path: ./ruleset/Netflix.yaml
    interval: 86400

  Tiktok:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml"
    path: ./ruleset/Tiktok.yaml
    interval: 86400

  Spotify:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml"
    path: ./ruleset/Spotify.yaml
    interval: 86400

  Proxy:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml"
    path: ./ruleset/PROXY.yaml
    interval: 86400

# è§„åˆ™éƒ¨åˆ†å»ºè®®åŸŸåè§„åˆ™åœ¨å‰ï¼Œipè§„åˆ™åœ¨å
# ipè§„åˆ™å°½é‡ä½¿ç”¨no-resolveï¼Œå‡å°‘éœ€è¦èµ°ä»£ç†çš„åŸŸååœ¨æœ¬åœ°è§£æçš„æƒ…å†µ
rules:
  - RULE-SET,Apple,è‹¹æœ
  - RULE-SET,Netflix,å¥ˆé£
  - RULE-SET,Tiktok,æŠ–éŸ³
  - RULE-SET,Spotify,éŸ³ä¹
  - RULE-SET,Proxy,ä»£ç†
  - GEOIP,LAN,ç›´è¿
  - GEOIP,CN,ç›´è¿
  - MATCH,å…œåº•