mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: info
external-controller: '127.0.0.1:9090'

dns:
    enable: true
    ipv6: false
    default-nameserver: [223.5.5.5, 119.29.29.29, 114.114.114.114]
    enhanced-mode: fake-ip
    fake-ip-range: 198.18.0.1/16
    use-hosts: true
    follow-rules: true
    proxy-server-nameserver: [223.5.5.5, 119.29.29.29, 114.114.114.114]
    nameserver: [223.5.5.5, 119.29.29.29, 114.114.114.114]
    fallback: [1.1.1.1, 8.8.8.8]
    fallback-filter: { geoip: true, geoip-code: CN, geosite: [gfw], ipcidr: [240.0.0.0/4], domain: [+.google.com, +.facebook.com, +.youtube.com] }

# å¦‚æœæœ‰èŠ‚ç‚¹å¯æŒ‰æ–‡æ¡£å¡«å†™ï¼Œå¹¶åœ¨groupå†…ä½¿ç”¨
proxies:
   #- name: JPARM è½¬å‘
     #type: ss
     #server: 36.140.181.4
     #port: 43307
     #cipher: aes-256-gcm
     #password: 8nfdttdfuAiSZzE4Fo13gwA7Ah7AFNJ2W3jBaQhElqrH
     #udp: true


proxy-groups:
  - name: ä»£ç†
    type: select
    # proxieså¼•ç”¨åˆ«çš„ç»„æˆ–è€…é…ç½®åœ¨æ–‡ä»¶å†…proxiesçš„èŠ‚ç‚¹
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½
      # å¦‚æœ‰é…ç½®proxieséƒ¨åˆ†å¯æŒ‰å¦‚ä¸‹æ ¼å¼ä½¿ç”¨é…ç½®æ–‡ä»¶å†…è‡ªå®šä¹‰çš„èŠ‚ç‚¹(éè®¢é˜…èŠ‚ç‚¹)

  - name: è‹¹æœ
    type: select
    proxies:
      - ç›´è¿
      - ä»£ç†

  - name: å¥ˆé£
    type: select
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½

  - name: æŠ–éŸ³
    type: select
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½

  - name: éŸ³ä¹
    type: select
    proxies:
      - ç‹®åŸ
      - æ—¥æœ¬
      - å°æ¹¾
      - é¦™æ¸¯
      - ç¾å›½
      - éŸ©å›½

  - name: ç›´è¿
    type: url-test
    hidden: true
    proxies:
      - DIRECT

  - name: å…œåº•
    type: select
    proxies:
      - ä»£ç†
      - ç›´è¿

  - name: é¦™æ¸¯
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - æµé‡å…‰
      # å½“proxy-provideré…ç½®å¤šä¸ªè®¢é˜…æ—¶ï¼Œä½¿ç”¨useä¸‹æ–¹æ ¼å¼å¼•ç”¨ï¼Œè¿™é‡Œä¸ºåªæœ‰ä¸€ä¸ªè®¢é˜…çš„æƒ…å†µ
      # - Sub2
      # - Sub3
    # filterä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å»ç­›é€‰èŠ‚ç‚¹
    filter: "HK|Hong|ğŸ‡­ğŸ‡°|é¦™æ¸¯|æ¸¯|æ€¥é€Ÿ"

  - name: ç‹®åŸ
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - æµé‡å…‰
      # - Sub2
      # - Sub3
    filter: "SG|Singapore|ğŸ‡¸ğŸ‡¬|ç‹®åŸ|æ–°åŠ å¡"

  - name: æ—¥æœ¬
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - æµé‡å…‰
      # - Sub2
      # - Sub3
    filter: "JP|japan|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬"

  - name: ç¾å›½
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - æµé‡å…‰
      # - Sub2
      # - Sub3
    filter: "US|United|ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½"
  
  - name: å°æ¹¾
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - æµé‡å…‰
      # - Sub2
      # - Sub3
    filter: "å°æ¹¾|TW|TaiWan|å°"

  - name: éŸ©å›½
    interval: 120
    lazy: true
    tolerance: 50
    type: url-test
    include-all: true
    hidden: true
    use:
      - æµé‡å…‰
      # - Sub2
      # - Sub3
    filter: "éŸ©å›½|ğŸ‡°ğŸ‡·|KR|Korea|éŸ©"

  - name: å…¶ä»–
    type: select
    use:
      - æµé‡å…‰
      # - Sub2
      # - Sub3
    # ç­›é€‰é™¤æ—¥ç¾æ–°æ¸¯å¤–çš„èŠ‚ç‚¹ï¼Œå¯è‡ªè¡ŒæŒ‰æ ¼å¼æ·»åŠ 
    filter: "^(?!.*(?:Hong|HK|TW|KR|Taiwan|ğŸ‡¨ğŸ‡³|å®¢æˆ·|http|USA|Japan|Singapore|USA|éŸ©å›½|é¦™æ¸¯|æ—¥æœ¬|æ–°åŠ å¡|ç¾å›½)).*"


  # åœ¨çº¿è®¢é˜…,æœ‰å¤šä¸ªæœºåœºæŒ‰æ ¼å¼ä¹¦å†™åœ¨ä¸‹é¢
use: &use
  type: select
  use:
    - æµé‡å…‰
#    - æœ¬åœ°é…ç½®

# è®¢é˜…é“¾æ¥
# å¯¹äºè®¢é˜…æ¥è¯´ï¼Œpath ä¸ºé€‰å¡«é¡¹ï¼Œä½†å»ºè®®å¯ç”¨
# æœ¬åœ°é…ç½®å¯ä»¥åªå¡« path
proxy-providers:
  æµé‡å…‰:
    <<: *p
    path: ./proxy_provider/æµé‡å…‰.yaml
    url: "https://rgergergergerg6555.saojc.xyz/api/v1/client/subscribe?token=7ec3e41ef6c2ec767145fc02bbbf06e1"


# å¯å‚è€ƒmetaæ ¸æ–‡æ¡£ https://clash-meta.wiki/config/rules/rule-provider
rule-providers:
  Apple:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical.yaml"
    path: ./ruleset/Apple.yaml
    interval: 86400

  Netflix:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix_Classical.yaml"
    path: ./ruleset/Netflix.yaml
    interval: 86400

  Tiktok:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml"
    path: ./ruleset/Tiktok.yaml
    interval: 86400

  Spotify:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml"
    path: ./ruleset/Spotify.yaml
    interval: 86400

  Global:
    type: http
    behavior: domain
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global_Classical.yaml"
    path: ./ruleset/Global.yaml
    interval: 86400

# è§„åˆ™éƒ¨åˆ†å»ºè®®åŸŸåè§„åˆ™åœ¨å‰ï¼Œipè§„åˆ™åœ¨å
# ipè§„åˆ™å°½é‡ä½¿ç”¨no-resolveï¼Œå‡å°‘éœ€è¦èµ°ä»£ç†çš„åŸŸååœ¨æœ¬åœ°è§£æçš„æƒ…å†µ
rules:
  - RULE-SET,Apple,è‹¹æœ
  - RULE-SET,Netflix,å¥ˆé£
  - RULE-SET,Tiktok,æŠ–éŸ³
  - RULE-SET,Spotify,éŸ³ä¹
  - RULE-SET,Global,ä»£ç†
  - GEOIP,LAN,ç›´è¿
  - GEOIP,CN,ç›´è¿
  - MATCH,å…œåº•